<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <style>
        .loginInfo {
            margin-top: 20%;
            text-align: center;
        }
    </style>
</head>
<body>
    
    <div class="loginInfo">
        <div class="name" style="height: 52px;">
            <span style="padding-right: 76px; font-size: large; font-weight: 900;">ğŸ”‘ì•„ì´ë””</span>
            <input type="text" name="loginUsername" id="loginUsername" required>
        </div>
        
        <div class="password" style="height: 52px;">
            <span style="padding-right: 62px; font-size: large; font-weight: 900;">ğŸ”’ë¹„ë°€ë²ˆí˜¸</span> 
            <input type="password" name="loginPassword" id="loginPassword" required><br>
        </div>

        <div class="login" style="padding-top: 30px; padding-left: 30px;">
            <input type="submit" id="login_button" value="ë¡œê·¸ì¸" onclick="handleLogin();"></input>
        </div>
        <div style="padding-left: 300px;">
            <a href="index.html">ğŸ Home</a>
        </div>
    </div>

    <script>
        const handleLogin = () => {
            // name -> loginUsername, password -> loginPassword
            const loginUsername = document.getElementById('loginUsername').value;
            const loginPassword = document.getElementById('loginPassword').value;

            // ì—¬ê¸°ì—ì„œ ì‹¤ì œ ë¡œê·¸ì¸ ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•˜ê³ , ë¡œê·¸ì¸ì´ ì„±ê³µí•˜ë©´ ì‚¬ìš©ì ì •ë³´ë¥¼ ì €ì¥
            const user = authenticateUser(loginUsername, loginPassword);

            if (user) {
                // ë¡œê·¸ì¸ ì„±ê³µ ì‹œ ì‚¬ìš©ì ì •ë³´ë¥¼ localStorageì— ì €ì¥
                localStorage.setItem('loggedInUser', JSON.stringify(user));
                // ë¡œê·¸ì¸ ì„±ê³µ ì‹œ ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™ ë˜ëŠ” ë‹¤ë¥¸ ë™ì‘ ìˆ˜í–‰
                window.location.href = 'index.html';
            } else {
                // ë¡œê·¸ì¸ ì‹¤íŒ¨ ì‹œ ì²˜ë¦¬
                alert('ë¡œê·¸ì¸ ì‹¤íŒ¨. ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•˜ì„¸ìš”.');
            }
        };

        // authenticateUser
        const authenticateUser = (loginUsername, loginPassword) => {
            // ì—¬ê¸°ì—ì„œëŠ” ë¯¸ë¦¬ ë“±ë¡ëœ ì‚¬ìš©ì ì •ë³´ë¥¼ í™•ì¸
            const users = JSON.parse(localStorage.getItem('userInformation')) || [];

            // ë“±ë¡ëœ ì‚¬ìš©ì ì¤‘ì—ì„œ ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ëŠ” ì‚¬ìš©ì ì°¾ê¸°
            const authenticatedUser = users.find(user => user.name === loginUsername && user.password === loginPassword);

            return authenticatedUser;
        };
    </script>
</body>
</html>